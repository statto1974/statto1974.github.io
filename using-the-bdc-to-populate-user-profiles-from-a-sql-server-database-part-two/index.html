<!DOCTYPE html><html lang="en-gb" data-theme="green-gray"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Using the BDC to populate user profiles from a SQL Server database - Part Two - Toby Statham</title><meta name="description" content="This is the second part of a two part post. The first part can be seen here Now that we have SSO setup and working, we now need to create and import the application definition. I'm not going to go into to much detail on how to create a application&hellip;"><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="https://wutek.co.uk/using-the-bdc-to-populate-user-profiles-from-a-sql-server-database-part-two/"><meta property="og:title" content="Using the BDC to populate user profiles from a SQL Server database - Part Two"><meta property="og:site_name" content="Toby Statham"><meta property="og:description" content="This is the second part of a two part post. The first part can be seen here Now that we have SSO setup and working, we now need to create and import the application definition. I'm not going to go into to much detail on how to create a application&hellip;"><meta property="og:url" content="https://wutek.co.uk/using-the-bdc-to-populate-user-profiles-from-a-sql-server-database-part-two/"><meta property="og:type" content="article"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@this_is_wutek"><meta name="twitter:title" content="Using the BDC to populate user profiles from a SQL Server database - Part Two"><meta name="twitter:description" content="This is the second part of a two part post. The first part can be seen here Now that we have SSO setup and working, we now need to create and import the application definition. I'm not going to go into to much detail on how to create a application&hellip;"><link rel="alternate" type="application/atom+xml" href="https://wutek.co.uk/feed.xml"><link rel="alternate" type="application/json" href="https://wutek.co.uk/feed.json"><link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin><link href="https://fonts.googleapis.com/css?family=Playfair+Display:400,700&amp;subset=latin-ext&amp;display=swap" rel="stylesheet"><style>:root {
               --body-font: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
               --heading-font: 'Playfair Display', serif;
               --logo-font: var(--body-font);
               --menu-font: var(--heading-font);
            }</style><link rel="stylesheet" href="https://wutek.co.uk/assets/css/style.css?v=076b19ff0048426f36c3ff3f27f97211"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://wutek.co.uk/using-the-bdc-to-populate-user-profiles-from-a-sql-server-database-part-two/"},"headline":"Using the BDC to populate user profiles from a SQL Server database - Part Two","datePublished":"2007-11-02T09:46","dateModified":"2021-05-04T08:35","description":"This is the second part of a two part post. The first part can be seen here Now that we have SSO setup and working, we now need to create and import the application definition. I'm not going to go into to much detail on how to create a application&hellip;","author":{"@type":"Person","name":"Toby Statham"},"publisher":{"@type":"Organization","name":"Toby Statham"}}</script></head><body><header class="header" id="js-header"><div><a class="logo" href="https://wutek.co.uk/">Toby Statham</a><div class="search"><div class="search__overlay js-search-overlay"><form action="https://wutek.co.uk/search.html" class="search__form"><input class="search__input js-search-input" type="search" name="q" placeholder="Search articles..." aria-label="Search input" autofocus="autofocus"> <button class="search__submit" aria-label="Search">Search</button></form></div><button class="search__btn js-search-btn" aria-label="Search"><svg height="17" width="17"><use xlink:href="https://wutek.co.uk/assets/svg/svg-map.svg#search"/></svg></button></div></div></header><main><article class="post"><header class="post__inner post__header--centered"><h1 class="h0 post__title">Using the BDC to populate user profiles from a SQL Server database - Part Two</h1><div class="post__meta"><div class="post__meta__author"><div><a href="https://wutek.co.uk/authors/toby-statham/" class="post__author">Toby Statham</a> <time datetime="2007-11-02T09:46" class="post__date">November 2, 2007</time></div></div></div></header><div class="post__body"><div class="post__inner"><div class="post__entry"><p>This is the second part of a two part post. The first part can be seen <a href="http://statto1974.wordpress.com/2007/05/15/using-the-bdc-to-populate-user-profiles-from-a-sql-server-database-part-one" title="Here">here</a></p><p>Now that we have SSO setup and working, we now need to create and import the application definition.</p><p>I'm not going to go into to much detail on how to create a application definition, but there are various tools available that you can use (<a href="http://www.bdcmetaman.com" title="BDC Meta Manager">BDC Meta Manager</a>, Microsoft Business Data Catalog Definition Editor which is part of the <a href="http://www.microsoft.com/downloads/details.aspx?familyid=6d94e307-67d9-41ac-b2d6-0074d6286fa9&amp;displaylang=en" title="SharePoint Server 2007 SDK">SharePoint Server 2007 SDK</a>)</p><p>Here are the key parts of the application definition you need to be aware of.</p><p>I have added the XML to a Word document which can be downloaded <a href="http://statto1974.files.wordpress.com/2007/11/personsappdef.doc" title="here">here</a> (Sorry WordPress doesn't let me upload XML files)</p><p>Below are the properties used by SharePoint to connect to the database. You need to  use the SSO ID specified in Part One when you setup SSO</p><p><code><br><font size="2" color="#0000ff"><br></font><font size="2" color="#0000ff">&lt;<font size="2" color="#800000">LobSystemInstance</font><font size="2" color="#0000ff"> </font><font size="2" color="#ff0000">Name</font><font size="2" color="#0000ff">=</font><font size="2">"</font><font size="2" color="#0000ff">Persons</font><font size="2">"</font><font size="2" color="#0000ff">&gt;<br></font><font size="2" color="#0000ff">&lt;<font size="2" color="#800000">Properties</font><font size="2" color="#0000ff">&gt;<br>&lt;<font size="2" color="#800000">Property</font><font size="2" color="#0000ff"> </font><font size="2" color="#ff0000">Name</font><font size="2" color="#0000ff">=</font><font size="2">"</font><font size="2" color="#0000ff">AuthenticationMode</font><font size="2">"</font><font size="2" color="#0000ff"> </font><font size="2" color="#ff0000">Type</font><font size="2" color="#0000ff">=</font><font size="2">"</font><font size="2" color="#0000ff">System.String</font><font size="2">"</font><font size="2" color="#0000ff">&gt;</font><font size="2">RdbCredentials</font><font size="2" color="#0000ff">&lt;/</font><font size="2" color="#800000">Property</font><font size="2" color="#0000ff">&gt;<br></font><font size="2" color="#0000ff">&lt;<font size="2" color="#800000">Property</font><font size="2" color="#0000ff"> </font><font size="2" color="#ff0000">Name</font><font size="2" color="#0000ff">=</font><font size="2">"</font><font size="2" color="#0000ff">DatabaseAccessProvider</font><font size="2">"</font><font size="2" color="#0000ff"> </font><font size="2" color="#ff0000">Type</font><font size="2" color="#0000ff">=</font><font size="2">"</font><font size="2" color="#0000ff">System.String</font><font size="2">"</font><font size="2" color="#0000ff">&gt;</font><font size="2">SqlServer</font><font size="2" color="#0000ff">&lt;/</font><font size="2" color="#800000">Property</font><font size="2" color="#0000ff">&gt;<br>&lt;<font size="2" color="#800000">Property</font><font size="2" color="#0000ff"> </font><font size="2" color="#ff0000">Name</font><font size="2" color="#0000ff">=</font><font size="2">"</font><font size="2" color="#0000ff">RdbConnection Data Source</font><font size="2">"</font><font size="2" color="#0000ff"> </font><font size="2" color="#ff0000">Type</font><font size="2" color="#0000ff">=</font><font size="2">"</font><font size="2" color="#0000ff">System.String</font><font size="2">"</font><font size="2" color="#0000ff">&gt;</font><font size="2">MyServerName</font><font size="2" color="#0000ff">&lt;/</font><font size="2" color="#800000">Property</font><font size="2" color="#0000ff">&gt;<br></font><font size="2" color="#0000ff">&lt;<font size="2" color="#800000">Property</font><font size="2" color="#0000ff"> </font><font size="2" color="#ff0000">Name</font><font size="2" color="#0000ff">=</font><font size="2">"</font><font size="2" color="#0000ff">RdbConnection Initial Catalog</font><font size="2">"</font><font size="2" color="#0000ff"> </font><font size="2" color="#ff0000">Type</font><font size="2" color="#0000ff">=</font><font size="2">"</font><font size="2" color="#0000ff">System.String</font><font size="2">"</font><font size="2" color="#0000ff">&gt;</font><font size="2">MyDatabaseName</font><font size="2" color="#0000ff">&lt;/</font><font size="2" color="#800000">Property</font><font size="2" color="#0000ff">&gt;<br>&lt;<font size="2" color="#800000">Property</font><font size="2" color="#0000ff"> </font><font size="2" color="#ff0000">Name</font><font size="2" color="#0000ff">=</font><font size="2">"</font><font size="2" color="#0000ff">RdbConnection Integrated Security</font><font size="2">"</font><font size="2" color="#0000ff"> </font><font size="2" color="#ff0000">Type</font><font size="2" color="#0000ff">=</font><font size="2">"</font><font size="2" color="#0000ff">System.String</font><font size="2">"</font><font size="2" color="#0000ff">&gt;</font><font size="2">false</font><font size="2" color="#0000ff">&lt;/</font><font size="2" color="#800000">Property</font><font size="2" color="#0000ff">&gt;<br></font><font size="2" color="#0000ff">&lt;<font size="2" color="#800000">Property</font><font size="2" color="#0000ff"> </font><font size="2" color="#ff0000">Name</font><font size="2" color="#0000ff">=</font><font size="2">"</font><font size="2" color="#0000ff">RdbConnection Pooling</font><font size="2">"</font><font size="2" color="#0000ff"> </font><font size="2" color="#ff0000">Type</font><font size="2" color="#0000ff">=</font><font size="2">"</font><font size="2" color="#0000ff">System.String</font><font size="2">"</font><font size="2" color="#0000ff">&gt;</font><font size="2">true</font><font size="2" color="#0000ff">&lt;/</font><font size="2" color="#800000">Property</font><font size="2" color="#0000ff">&gt;<br>&lt;<font size="2" color="#800000">Property</font><font size="2" color="#0000ff"> </font><font size="2" color="#ff0000">Name</font><font size="2" color="#0000ff">=</font><font size="2">"</font><font size="2" color="#0000ff">SsoApplicationId</font><font size="2">"</font><font size="2" color="#0000ff"> </font><font size="2" color="#ff0000">Type</font><font size="2" color="#0000ff">=</font><font size="2">"</font><font size="2" color="#0000ff">System.String</font><font size="2">"</font><font size="2" color="#0000ff">&gt;</font><font size="2">SSOAppId</font><font size="2" color="#0000ff">&lt;/</font><font size="2" color="#800000">Property</font><font size="2" color="#0000ff">&gt;<br></font><font size="2" color="#0000ff">&lt;<font size="2" color="#800000">Property</font><font size="2" color="#0000ff"> </font><font size="2" color="#ff0000">Name</font><font size="2" color="#0000ff">=</font><font size="2">"</font><font size="2" color="#0000ff">SsoProviderImplementation</font><font size="2">"</font><font size="2" color="#0000ff"> </font><font size="2" color="#ff0000">Type</font><font size="2" color="#0000ff">=</font><font size="2">"</font><font size="2" color="#0000ff">System.String</font><font size="2">"</font><font size="2" color="#0000ff">&gt;</font><font size="2">Microsoft.SharePoint.Portal.SingleSignon.SpsSsoProvider, Microsoft.SharePoint.Portal.SingleSignon, Version=12.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c</font><font size="2" color="#0000ff">&lt;/</font><font size="2" color="#800000">Property</font><font size="2" color="#0000ff">&gt;<br>&lt;/<font size="2" color="#800000">Properties</font><font size="2" color="#0000ff">&gt;<br>&lt;/<font size="2" color="#800000">LobSystemInstance</font><font size="2" color="#0000ff">&gt;</font></font><br></font></font></font></font></font></font></font></font></font></font></font></code></p><p>If your primary source is going to be from your Active Directory (In most cases it will be). Your identifier needs to be in the format of DOMAIN\UserName</p><p>Once you have loaded your application you need to add both the search crawl account and the user crawl account and give them execute permission . In most cases this will be the same account, but if you have followed the least privilege configuration, these will be separate accounts and both will need to be added.</p><p>To add the BDC as secondary connection, go to the following link in SSP admin;</p><p><a href="http://myserver/ssp/admin/_layouts/MgrDSServer.aspx">http://myserver/ssp/admin/_layouts/MgrDSServer.aspx</a></p><p>Or</p><p><span><span>Shared Services Administration: My SSP</span><span> &gt; </span><span>User Profile and Properties</span><span> &gt; </span><span class="ms-sitemapdirectional">Manage Connections</span></span></p><p>Click on the "Create New Connection" button and enter the information as below</p><p>You need to match your UserNameFilter specified in the application definition file to the AccountName User Profile field</p><p><img loading="lazy" src="https://wutek.co.uk/media/posts/11/new-picture-1.jpg" sizes="(max-width: 1200px) 100vw, 1200px" srcset="https://wutek.co.uk/media/posts/11/responsive/new-picture-1-xs.jpg 300w, https://wutek.co.uk/media/posts/11/responsive/new-picture-1-sm.jpg 480w, https://wutek.co.uk/media/posts/11/responsive/new-picture-1-md.jpg 768w, https://wutek.co.uk/media/posts/11/responsive/new-picture-1-xl.jpg 1200w" alt="User Profile Import Settings"></p><p>Click OK and then schedule a full profile import.</p><p>Once the import has finished, check the import logs for any errors. This should always be your first port of call if it does not work.</p><p>Look for errors under the PEOPLE_DL_IMPORT content source and beginning with <span title="//$$nonmaster$$?fm/zz_newst">spsimport://$$nonmaster$$</span></p><p><span title="//$$nonmaster$$?fm/zz_newst">Once the import has been run successfully, you will now be able to map the fields with the user profile properties in the "View Profile Properties" page.</span></p></div><footer class="post__footer"><div class="post__updated">Updated: <time datetime="2021-05-04T08:35">May 4, 2021</time></div><div class="post__tag"><span>Tags:</span><ul class="post__tag__list"><li><a href="https://wutek.co.uk/tags/bdc/" title="BDC">BDC</a></li><li><a href="https://wutek.co.uk/tags/installation/" title="Installation">Installation</a></li><li><a href="https://wutek.co.uk/tags/sso/" title="SSO">SSO</a></li><li><a href="https://wutek.co.uk/tags/user-profiles/" title="User Profiles">User Profiles</a></li></ul></div><div class="post__meta"><div class="post__meta__share"><h3>Share this:</h3></div></div></footer></div></div></article><div class="section post__related"><div class="wrapper"><h3 class="h4 section__title">You may also like:</h3><div class="card-container card-container--col4"><article class="card"><div class="card__content"><h2 class="card__title"><a href="https://wutek.co.uk/powerpivot-management-dashboard-error-with-infrastructure-server-health-report/" class="invert">PowerPivot Management Dashboard: Error with &quot;Infrastructure - Server Health&quot; report</a></h2><p>When loading this page in Central Administration, I...</p><footer class="card__footer"><time datetime="2013-09-27T10:41">September 27, 2013 </time><a href="https://getpocket.com/save?url=https%3A%2F%2Fwutek.co.uk%2Fpowerpivot-management-dashboard-error-with-infrastructure-server-health-report%2F&title=PowerPivot%20Management%20Dashboard%3A%20Error%20with%20%22Infrastructure%20-%20Server%20Health%22%20report" class="btn btn--clean card__readlater js-share" aria-label="Read later"><svg><use xlink:href="https://wutek.co.uk/assets/svg/svg-map.svg#readlater"/></svg></a></footer></div></article><article class="card"><div class="card__content"><h2 class="card__title"><a href="https://wutek.co.uk/traversing-taxonomy-terms-from-branch-to-leaf/" class="invert">Traversing Taxonomy Terms from branch to leaf</a></h2><p>I had a need to show the path...</p><footer class="card__footer"><time datetime="2013-01-29T10:15">January 29, 2013 </time><a href="https://getpocket.com/save?url=https%3A%2F%2Fwutek.co.uk%2Ftraversing-taxonomy-terms-from-branch-to-leaf%2F&title=Traversing%20Taxonomy%20Terms%20from%20branch%20to%20leaf" class="btn btn--clean card__readlater js-share" aria-label="Read later"><svg><use xlink:href="https://wutek.co.uk/assets/svg/svg-map.svg#readlater"/></svg></a></footer></div></article><article class="card"><div class="card__content"><h2 class="card__title"><a href="https://wutek.co.uk/field-in-list-not-available-in-listitem-using-managed-client-object-model/" class="invert">Field in List not available in ListItem using Managed Client Object Model</a></h2><p>If you have a field called &quot;Folder&quot; it...</p><footer class="card__footer"><time datetime="2013-01-25T15:17">January 25, 2013 </time><a href="https://getpocket.com/save?url=https%3A%2F%2Fwutek.co.uk%2Ffield-in-list-not-available-in-listitem-using-managed-client-object-model%2F&title=Field%20in%20List%20not%20available%20in%20ListItem%20using%20Managed%20Client%20Object%20Model" class="btn btn--clean card__readlater js-share" aria-label="Read later"><svg><use xlink:href="https://wutek.co.uk/assets/svg/svg-map.svg#readlater"/></svg></a></footer></div></article><article class="card"><div class="card__content"><h2 class="card__title"><a href="https://wutek.co.uk/runas-method-for-running-code-in-specific-user-spservicecontext/" class="invert">RunAs method for running code in specific user SPServiceContext</a></h2><p>You may have the need to run some...</p><footer class="card__footer"><time datetime="2011-10-25T14:07">October 25, 2011 </time><a href="https://getpocket.com/save?url=https%3A%2F%2Fwutek.co.uk%2Frunas-method-for-running-code-in-specific-user-spservicecontext%2F&title=RunAs%20method%20for%20running%20code%20in%20specific%20user%20SPServiceContext" class="btn btn--clean card__readlater js-share" aria-label="Read later"><svg><use xlink:href="https://wutek.co.uk/assets/svg/svg-map.svg#readlater"/></svg></a></footer></div></article></div></div></div></main><footer class="footer section section--lightest"><div class="footer__inner"><a class="logo footer__logo" href="https://wutek.co.uk/">Toby Statham</a><div class="footer__copyright"><p>Powered by Publii</p></div><div class="footer__nav"><ul class="footer__nav"><li><a href="https://wutek.co.uk/" target="_self">Home</a></li><li><a href="https://wutek.co.uk/tags/" target="_self">Tags</a></li><li><a href="https://wutek.co.uk/about-me/" target="_self">About</a></li></ul></div></div><button class="footer__bttop js-scroll-to-top" aria-label="Back to top"><svg><svg><use xlink:href="https://wutek.co.uk/assets/svg/svg-map.svg#toparrow"/></svg></svg></button></footer><script defer="defer" src="https://wutek.co.uk/assets/js/scripts.min.js?v=11cb42b202c1c2462a7002b62194e351"></script><script>window.publiiThemeMenuConfig = {    
      mobileMenuMode: 'sidebar',
      animationSpeed: 300,
      submenuWidth: 'auto',
      doubleClickTime: 500,
      mobileMenuExpandableSubmenus: true, 
      relatedContainerForOverlayMenuSelector: '.navbar',
   };</script><script>var images = document.querySelectorAll('img[loading]');

      for (var i = 0; i < images.length; i++) {
         if (images[i].complete) {
               images[i].classList.add('is-loaded');
         } else {
               images[i].addEventListener('load', function () {
                  this.classList.add('is-loaded');
               }, false);
         }
      }</script></body></html>