<!DOCTYPE html><html lang="en-gb" data-theme="green-gray"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Be careful when editing the application.master page - Toby Statham</title><meta name="description" content="Here's an odd one. We had customized our master pages by adding in the Search WebPart, so we could customize some of the parameters We changed the following: &lt;asp:ContentPlaceHolder id='PlaceHolderSearchArea' runat='server'&gt;&lt;/asp:ContentPlaceHolder&gt; To the following: &lt;asp:ContentPlaceHolder id='PlaceHolderSearchArea' runat='server'&gt; &lt;SPSWC:SearchBoxEx webpart='true' runat='server' __webpartid='{2883947B-2B5C-4A56-92B3-33B7383F7C0D}' id='SearchBoxEx1'&gt;&lt;WebPart xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xmlns:xsd='http://www.w3.org/2001/XMLSchema' xmlns='http://schemas.microsoft.com/WebPart/v2'&gt; &lt;Title /&gt; &lt;FrameType&gt;None&lt;/FrameType&gt; &lt;Description&gt;Used to&hellip;"><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="https://wutek.co.uk/be-careful-when-editing-the-applicationmaster-page/"><meta property="og:title" content="Be careful when editing the application.master page"><meta property="og:site_name" content="Toby Statham"><meta property="og:description" content="Here's an odd one. We had customized our master pages by adding in the Search WebPart, so we could customize some of the parameters We changed the following: &lt;asp:ContentPlaceHolder id='PlaceHolderSearchArea' runat='server'&gt;&lt;/asp:ContentPlaceHolder&gt; To the following: &lt;asp:ContentPlaceHolder id='PlaceHolderSearchArea' runat='server'&gt; &lt;SPSWC:SearchBoxEx webpart='true' runat='server' __webpartid='{2883947B-2B5C-4A56-92B3-33B7383F7C0D}' id='SearchBoxEx1'&gt;&lt;WebPart xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xmlns:xsd='http://www.w3.org/2001/XMLSchema' xmlns='http://schemas.microsoft.com/WebPart/v2'&gt; &lt;Title /&gt; &lt;FrameType&gt;None&lt;/FrameType&gt; &lt;Description&gt;Used to&hellip;"><meta property="og:url" content="https://wutek.co.uk/be-careful-when-editing-the-applicationmaster-page/"><meta property="og:type" content="article"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@this_is_wutek"><meta name="twitter:title" content="Be careful when editing the application.master page"><meta name="twitter:description" content="Here's an odd one. We had customized our master pages by adding in the Search WebPart, so we could customize some of the parameters We changed the following: &lt;asp:ContentPlaceHolder id='PlaceHolderSearchArea' runat='server'&gt;&lt;/asp:ContentPlaceHolder&gt; To the following: &lt;asp:ContentPlaceHolder id='PlaceHolderSearchArea' runat='server'&gt; &lt;SPSWC:SearchBoxEx webpart='true' runat='server' __webpartid='{2883947B-2B5C-4A56-92B3-33B7383F7C0D}' id='SearchBoxEx1'&gt;&lt;WebPart xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xmlns:xsd='http://www.w3.org/2001/XMLSchema' xmlns='http://schemas.microsoft.com/WebPart/v2'&gt; &lt;Title /&gt; &lt;FrameType&gt;None&lt;/FrameType&gt; &lt;Description&gt;Used to&hellip;"><link rel="alternate" type="application/atom+xml" href="https://wutek.co.uk/feed.xml"><link rel="alternate" type="application/json" href="https://wutek.co.uk/feed.json"><link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin><link href="https://fonts.googleapis.com/css?family=Playfair+Display:400,700&amp;subset=latin-ext&amp;display=swap" rel="stylesheet"><style>:root {
               --body-font: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
               --heading-font: 'Playfair Display', serif;
               --logo-font: var(--body-font);
               --menu-font: var(--heading-font);
            }</style><link rel="stylesheet" href="https://wutek.co.uk/assets/css/style.css?v=076b19ff0048426f36c3ff3f27f97211"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://wutek.co.uk/be-careful-when-editing-the-applicationmaster-page/"},"headline":"Be careful when editing the application.master page","datePublished":"2007-10-29T09:00","dateModified":"2021-05-04T08:35","description":"Here's an odd one. We had customized our master pages by adding in the Search WebPart, so we could customize some of the parameters We changed the following: &lt;asp:ContentPlaceHolder id=\"PlaceHolderSearchArea\" runat=\"server\"&gt;&lt;/asp:ContentPlaceHolder&gt; To the following: &lt;asp:ContentPlaceHolder id=\"PlaceHolderSearchArea\" runat=\"server\"&gt; &lt;SPSWC:SearchBoxEx webpart=\"true\" runat=\"server\" __webpartid=\"{2883947B-2B5C-4A56-92B3-33B7383F7C0D}\" id=\"SearchBoxEx1\"&gt;&lt;WebPart xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns=\"http://schemas.microsoft.com/WebPart/v2\"&gt; &lt;Title /&gt; &lt;FrameType&gt;None&lt;/FrameType&gt; &lt;Description&gt;Used to&hellip;","author":{"@type":"Person","name":"Toby Statham"},"publisher":{"@type":"Organization","name":"Toby Statham"}}</script></head><body><header class="header" id="js-header"><div><a class="logo" href="https://wutek.co.uk/">Toby Statham</a><div class="search"><div class="search__overlay js-search-overlay"><form action="https://wutek.co.uk/search.html" class="search__form"><input class="search__input js-search-input" type="search" name="q" placeholder="Search articles..." aria-label="Search input" autofocus="autofocus"> <button class="search__submit" aria-label="Search">Search</button></form></div><button class="search__btn js-search-btn" aria-label="Search"><svg height="17" width="17"><use xlink:href="https://wutek.co.uk/assets/svg/svg-map.svg#search"/></svg></button></div></div></header><main><article class="post"><header class="post__inner post__header--centered"><h1 class="h0 post__title">Be careful when editing the application.master page</h1><div class="post__meta"><div class="post__meta__author"><div><a href="https://wutek.co.uk/authors/toby-statham/" class="post__author">Toby Statham</a> <time datetime="2007-10-29T09:00" class="post__date">October 29, 2007</time></div></div></div></header><div class="post__body"><div class="post__inner"><div class="post__entry"><p>Here's an odd one.</p><p>We had customized our master pages by adding in the Search WebPart, so we could customize some of the parameters</p><p>We changed the following:</p><p><code>&lt;asp:ContentPlaceHolder id="PlaceHolderSearchArea" runat="server"&gt;&lt;/asp:ContentPlaceHolder&gt;</code></p><p>To the following:</p><p><code>&lt;asp:ContentPlaceHolder id="PlaceHolderSearchArea" runat="server"&gt;<br>&lt;SPSWC:SearchBoxEx webpart="true" runat="server" __webpartid="{2883947B-2B5C-4A56-92B3-33B7383F7C0D}" id="SearchBoxEx1"&gt;&lt;WebPart xmlns:xsi="<a href="http://www.w3.org/2001/XMLSchema-instance">http://www.w3.org/2001/XMLSchema-instance</a>" xmlns:xsd="<a href="http://www.w3.org/2001/XMLSchema">http://www.w3.org/2001/XMLSchema</a>" xmlns="<a href="http://schemas.microsoft.com/WebPart/v2">http://schemas.microsoft.com/WebPart/v2</a>"&gt;<br>  &lt;Title /&gt;<br>  &lt;FrameType&gt;None&lt;/FrameType&gt;<br>  &lt;Description&gt;Used to search document and items.&lt;/Description&gt;<br>  &lt;IsIncluded&gt;true&lt;/IsIncluded&gt;<br>  &lt;ZoneID&gt;ImportedPartZone&lt;/ZoneID&gt;<br>  &lt;PartOrder&gt;0&lt;/PartOrder&gt;<br>  &lt;FrameState&gt;Normal&lt;/FrameState&gt;<br>  &lt;Height /&gt;<br>  &lt;Width /&gt;<br>  &lt;AllowRemove&gt;true&lt;/AllowRemove&gt;<br>  &lt;AllowZoneChange&gt;true&lt;/AllowZoneChange&gt;<br>  &lt;AllowMinimize&gt;true&lt;/AllowMinimize&gt;<br>  &lt;AllowConnect&gt;true&lt;/AllowConnect&gt;<br>  &lt;AllowEdit&gt;true&lt;/AllowEdit&gt;<br>  &lt;AllowHide&gt;true&lt;/AllowHide&gt;<br>  &lt;IsVisible&gt;true&lt;/IsVisible&gt;<br>  &lt;DetailLink /&gt;<br>  &lt;HelpLink /&gt;<br>  &lt;HelpMode&gt;Modeless&lt;/HelpMode&gt;<br>  &lt;Dir&gt;Default&lt;/Dir&gt;<br>  &lt;PartImageSmall /&gt;<br>  &lt;MissingAssembly&gt;Cannot import this Web Part.&lt;/MissingAssembly&gt;<br>  &lt;PartImageLarge /&gt;<br>  &lt;IsIncludedFilter /&gt;<br>  &lt;ExportControlledProperties&gt;true&lt;/ExportControlledProperties&gt;<br>  &lt;ConnectionID&gt;00000000-0000-0000-0000-000000000000&lt;/ConnectionID&gt;<br>  &lt;ID&gt;g_455588d4_92a9_484e_9273_9221d7a9a97f&lt;/ID&gt;<br>  &lt;GoImageUrl xmlns="urn:schemas-microsoft-com:SearchBoxEx"&gt;/_layouts/images/gosearch.gif&lt;/GoImageUrl&gt;<br>  &lt;GoImageUrlRTL xmlns="urn:schemas-microsoft-com:SearchBoxEx"&gt;/_layouts/images/goRTL.gif&lt;/GoImageUrlRTL&gt;<br>  &lt;GoImageActiveUrl xmlns="urn:schemas-microsoft-com:SearchBoxEx"&gt;/_layouts/images/gosearch.gif&lt;/GoImageActiveUrl&gt;<br>  &lt;GoImageActiveUrlRTL xmlns="urn:schemas-microsoft-com:SearchBoxEx"&gt;/_layouts/images/goRTL.gif&lt;/GoImageActiveUrlRTL&gt;<br>  &lt;DropDownModeEx xmlns="urn:schemas-microsoft-com:SearchBoxEx"&gt;ShowDD_DefaultContextual&lt;/DropDownModeEx&gt;<br>  &lt;AdvancedSearchPageURL xmlns="urn:schemas-microsoft-com:SearchBoxEx"&gt;/SearchCenter/Pages/advanced.aspx&lt;/AdvancedSearchPageURL&gt;<br>  &lt;SearchResultPageURL xmlns="urn:schemas-microsoft-com:SearchBoxEx"&gt;/SearchCenter/Pages/results.aspx&lt;/SearchResultPageURL&gt;<br>  &lt;ScopeDisplayGroupName xmlns="urn:schemas-microsoft-com:SearchBoxEx"&gt;Search Dropdown&lt;/ScopeDisplayGroupName&gt;<br>  &lt;RegisterStyles xmlns="urn:schemas-microsoft-com:SearchBoxEx"&gt;true&lt;/RegisterStyles&gt;<br>  &lt;ShouldTakeFocusIfEmpty xmlns="urn:schemas-microsoft-com:SearchBoxEx"&gt;false&lt;/ShouldTakeFocusIfEmpty&gt;<br>                &lt;/WebPart&gt;<br>&lt;/SPSWC:SearchBoxEx&gt;<br>&lt;/asp:ContentPlaceHolder&gt;</code></p><p>We did this in all our master pages including the application.master page.</p><p>All was working fine until we tried to delete a column in a list and we go the "Unknown Error" message and the column wasn't deleted.</p><p>The following error message was be ing logged</p><p><code>Application error when access /_layouts/mngfield.aspx, Error=Unable to validate data.   at System.Web.Configuration.MachineKeySection.GetDecodedData(Byte[] buf, Byte[] modifier, Int32 start, Int32 length, Int32&amp; dataLength)     at System.Web.UI.ObjectStateFormatter.Deserialize(String inputString) </code></p><p>After of a month or so of investigation with Microsoft support, we discovered that the Search Webpart was causing the problem in the application.master page and causing a conflict in one of the application pages in the "Layouts" directory, specifically the mngfield.aspx page.</p><p>We have removed the Search WebPart from the application.master page and all seems to be working fine.</p></div><footer class="post__footer"><div class="post__updated">Updated: <time datetime="2021-05-04T08:35">May 4, 2021</time></div><div class="post__tag"><span>Tags:</span><ul class="post__tag__list"><li><a href="https://wutek.co.uk/tags/bugs/" title="Bugs">Bugs</a></li><li><a href="https://wutek.co.uk/tags/master-pages/" title="Master Pages">Master Pages</a></li><li><a href="https://wutek.co.uk/tags/search/" title="Search">Search</a></li></ul></div><div class="post__meta"><div class="post__meta__share"><h3>Share this:</h3></div></div></footer></div></div></article><div class="section post__related"><div class="wrapper"><h3 class="h4 section__title">You may also like:</h3><div class="card-container card-container--col4"><article class="card"><div class="card__image"><img src="https://wutek.co.uk/using-a-custom-master-page-in-a-site-definition/" srcset="https://wutek.co.uk/media/posts/1/responsive/pages-xs.jpg 300w, https://wutek.co.uk/media/posts/1/responsive/pages-sm.jpg 480w, https://wutek.co.uk/media/posts/1/responsive/pages-md.jpg 768w" sizes="https://wutek.co.uk/media/posts/1/responsive/pages-xs.jpg 300w ,https://wutek.co.uk/media/posts/1/responsive/pages-sm.jpg 480w ,https://wutek.co.uk/media/posts/1/responsive/pages-md.jpg 768w" loading="lazy" height="400" width="640" alt=""></div><div class="card__content"><h2 class="card__title"><a href="https://wutek.co.uk/using-a-custom-master-page-in-a-site-definition/" class="invert">Using a custom master page in a site definition</a></h2><p>SummaryUsing a site definition in a SharePoint solution...</p><footer class="card__footer"><time datetime="2007-04-30T18:33">April 30, 2007 </time><a href="https://getpocket.com/save?url=https%3A%2F%2Fwutek.co.uk%2Fusing-a-custom-master-page-in-a-site-definition%2F&title=Using%20a%20custom%20master%20page%20in%20a%20site%20definition" class="btn btn--clean card__readlater js-share" aria-label="Read later"><svg><use xlink:href="https://wutek.co.uk/assets/svg/svg-map.svg#readlater"/></svg></a></footer></div></article></div></div></div></main><footer class="footer section section--lightest"><div class="footer__inner"><a class="logo footer__logo" href="https://wutek.co.uk/">Toby Statham</a><div class="footer__copyright"><p>Powered by Publii</p></div></div><button class="footer__bttop js-scroll-to-top" aria-label="Back to top"><svg><svg><use xlink:href="https://wutek.co.uk/assets/svg/svg-map.svg#toparrow"/></svg></svg></button></footer><script defer="defer" src="https://wutek.co.uk/assets/js/scripts.min.js?v=11cb42b202c1c2462a7002b62194e351"></script><script>window.publiiThemeMenuConfig = {    
      mobileMenuMode: 'sidebar',
      animationSpeed: 300,
      submenuWidth: 'auto',
      doubleClickTime: 500,
      mobileMenuExpandableSubmenus: true, 
      relatedContainerForOverlayMenuSelector: '.navbar',
   };</script><script>var images = document.querySelectorAll('img[loading]');

      for (var i = 0; i < images.length; i++) {
         if (images[i].complete) {
               images[i].classList.add('is-loaded');
         } else {
               images[i].addEventListener('load', function () {
                  this.classList.add('is-loaded');
               }, false);
         }
      }</script></body></html>